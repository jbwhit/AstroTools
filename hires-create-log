#!/bin/tcsh
# Michael Murphy's hires log 

if ($1 == "") then
  echo "FILENAME       OBSTYPE      OBJECT     DATE-BEG            MJD          XDANGL  ECHANGL DECKNAME BINNING EXPTIME FIL1NAME FIL2NAME LAMPNAME LFILNAME RA          DEC            ST       HA           AIRMASS TEMPIN RELHUM AIRPRESS"
  foreach i (`/bin/ls hires????.fits`)
    ${HOME}/c/cfitsioexamples/listhead $i | awk -F "=" '{key=$1; gsub(" ","",key); gsub("[\x27]","",$2); gsub(" ","",$2); if (key == "OBSTYPE") OBSTYPE=$2; if (key == "OBJECT") OBJECT=$2; if (key == "DATE_BEG") DATEBEG=$2; if (key == "MJD") MJD=$2; if (key == "XDANGL") XDANGL=$2; if (key == "ECHANGL") ECHANGL=$2; if (key == "DECKNAME") DECKNAME=$2; if (key == "BINNING") BINNING=$2; if (key == "EXPTIME") EXPTIME=$2; if (key == "FIL1NAME") FIL1NAME=$2; if (key == "FIL2NAME") FIL2NAME=$2; if (key == "LAMPNAME") LAMPNAME=$2; if (key == "LFILNAME") LFILNAME=$2; if (key == "RA") RA=$2; if (key == "DEC") DEC=$2; if (key == "ST") ST=$2; if (key == "HA") HA=$2; if (key == "AIRMASS") AIRMASS=$2; if (key == "TEMPIN") TEMPIN=$2; if (key == "RELHUM") RELHUM=$2; if (key == "AIRPRESS") AIRPRESS=$2; if ($0 == "Header listing for HDU #4:") printf "%-14s %-12s %-10s %-19s %12.6lf %7.4lf %7.4lf %-8s %-7s %7.2lf %-8s %-8s %-8s %-8s %-11s %-11s %-11s %-12s %7.2lf %6.3lf %6.3lf %10.8lf\n","'$i'",OBSTYPE,OBJECT,DATEBEG,MJD,XDANGL,ECHANGL,DECKNAME,BINNING,EXPTIME,FIL1NAME,FIL2NAME,LAMPNAME,LFILNAME,RA,DEC,ST,HA,AIRMASS,TEMPIN,RELHUM,AIRPRESS}'
  end
else
  ${HOME}/c/cfitsioexamples/listhead $1 | awk -F "=" '{key=$1; gsub(" ","",key); gsub("[\x27]","",$2); gsub(" ","",$2); if (key == "OBSTYPE") OBSTYPE=$2; if (key == "OBJECT") OBJECT=$2; if (key == "DATE_BEG") DATEBEG=$2; if (key == "MJD") MJD=$2; if (key == "XDANGL") XDANGL=$2; if (key == "ECHANGL") ECHANGL=$2; if (key == "DECKNAME") DECKNAME=$2; if (key == "BINNING") BINNING=$2; if (key == "EXPTIME") EXPTIME=$2; if (key == "FIL1NAME") FIL1NAME=$2; if (key == "FIL2NAME") FIL2NAME=$2; if (key == "LAMPNAME") LAMPNAME=$2; if (key == "LFILNAME") LFILNAME=$2; if (key == "RA") RA=$2; if (key == "DEC") DEC=$2; if (key == "ST") ST=$2; if (key == "HA") HA=$2; if (key == "AIRMASS") AIRMASS=$2; if (key == "TEMPIN") TEMPIN=$2; if (key == "RELHUM") RELHUM=$2; if (key == "AIRPRESS") AIRPRESS=$2; if ($0 == "Header listing for HDU #4:") printf "%-14s %-12s %-10s %-19s %12.6lf %7.4lf %7.4lf %-8s %-7s %7.2lf %-8s %-8s %-8s %-8s %-11s %-11s %-11s %-12s %7.2lf %6.3lf %6.3lf %10.8lf\n","'$1'",OBSTYPE,OBJECT,DATEBEG,MJD,XDANGL,ECHANGL,DECKNAME,BINNING,EXPTIME,FIL1NAME,FIL2NAME,LAMPNAME,LFILNAME,RA,DEC,ST,HA,AIRMASS,TEMPIN,RELHUM,AIRPRESS}'
endif